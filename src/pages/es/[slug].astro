---
import { PROJECT_SLUGS, isValidSlug, getProjectData } from '@/utils/projects'
import MainPageContent from '@/components/MainPageContent.astro';

export async function getStaticPaths() {
  return PROJECT_SLUGS.map(slug => ({ params: { slug } }))
}

const { slug } = Astro.params
if (!slug || !isValidSlug(slug)) {
  return Astro.redirect('/404')
}

const currentLang = 'es';
const projectData = await getProjectData(slug, currentLang);

if (!projectData) {
  return Astro.redirect('/404')
}
---

<html lang={currentLang}>
  <head>
    <title>{projectData.title} - Francisco Beccaria</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content={projectData.generalDescription} />
    <meta name="keywords" content="frontend developer, web development, react.js, next.js, astro, portfolio">
    <link rel="icon" href="/favicon.ico" sizes="32x32" />
    <meta property="og:title" content={`${projectData.title} - Francisco Beccaria`} />
    <meta property="og:description" content={projectData.generalDescription} />
    <meta property="og:image" content={projectData.imageSrc} />
    <meta property="og:url" content={`https://franbeccaria.com/es/${slug}`} />
    
    <!-- Hreflang tags for SEO -->
    <link rel="alternate" hreflang="es" href={`https://franbeccaria.com/es/${slug}`} />
    <link rel="alternate" hreflang="en" href={`https://franbeccaria.com/${slug}`} />
    <link rel="alternate" hreflang="x-default" href={`https://franbeccaria.com/${slug}`} />
  </head>
  <body>
    <MainPageContent lang={currentLang} autoOpenProject={slug} />
  </body>
</html>