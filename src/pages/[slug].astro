---
import { PROJECT_SLUGS, isValidSlug } from '@/utils/projects'

export async function getStaticPaths() {
  return PROJECT_SLUGS.map(slug => ({
    params: { slug }
  }))
}

const { slug } = Astro.params

// Validate slug and redirect to main page with modal
if (slug && isValidSlug(slug)) {
  // Redirect to main page - the modal will open based on URL
  return Astro.redirect('/')
}

// If invalid slug, redirect to 404
return Astro.redirect('/404')
---